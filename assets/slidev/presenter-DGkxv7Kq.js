import{aj as A,z as y,d as P,o,c as p,i as E,B as t,t as N,E as F,Q as V,L as W,P as G,ak as H,a7 as q,b as m,e as s,l,k as g,h as T,g as Q,x as J,F as K}from"../modules/vue-Dqkxqskq.js";import{a as O,u as U,c as X,d as Y,h as Z,j as ee,k as te,l as se,m as oe,n as ne,s as re,_ as ie}from"../index-BnJbcPUi.js";import{b as le,c as ae,a as M,S as ce}from"./SlideWrapper-G_3fonl5.js";import{r as ue,u as de,a as me,S as pe,o as ve,_ as fe,G as xe,b as _e,c as ke}from"./shortcuts-BzDo5LYa.js";import{_ as ge,C as ye}from"./NoteDisplay.vue_vue_type_style_index_0_lang-BLcEAj6g.js";import{_ as be}from"./DrawingControls.vue_vue_type_style_index_0_lang-D9PNqhcs.js";import{_ as B}from"./IconButton.vue_vue_type_script_setup_true_lang-DCQtea_z.js";import"../modules/shiki-GQ7-JyJq.js";import"./context-Rn0eYKPb.js";import"../modules/unplugin-icons-CpcTJW2t.js";function Ce(){const{counter:f,isActive:r,reset:i,pause:c,resume:d}=A(1e3,{controls:!0});return{timer:y(()=>{const u=f.value,b=Math.floor(u%60).toString().padStart(2,"0");return`${Math.floor(u/60).toString().padStart(2,"0")}:${b}`}),isTimerAvctive:r,resetTimer:i,toggleTimer:()=>r.value?c():d()}}const he=P({__name:"NoteStatic",props:{no:{},class:{},clicksContext:{}},setup(f){const r=f,{info:i}=le(r.no);return(c,d)=>{var v,u;return o(),p(ge,{class:E(r.class),note:(v=t(i))==null?void 0:v.note,"note-html":(u=t(i))==null?void 0:u.noteHTML,"clicks-context":c.clicksContext},null,8,["class","note","note-html","clicks-context"])}}}),Se={class:"bg-main h-full slidev-presenter"},we={class:"relative grid-section next flex flex-col p-2 lg:p-4"},$e={key:1,class:"h-full flex justify-center items-center"},ze={key:0,class:"grid-section note of-auto"},Ne={key:1,class:"grid-section note grid grid-rows-[1fr_min-content] overflow-hidden"},Fe={class:"border-t border-main py-1 px-2 text-sm"},Te={class:"grid-section bottom flex"},Me={class:"group flex items-center justify-center pl-4 select-none"},Be={class:"w-22px cursor-pointer"},Pe={class:"group-not-hover:hidden flex flex-col items-center"},Ee={key:0,class:"i-carbon:pause text-lg"},je={key:1,class:"i-carbon:play"},De={class:"text-2xl px-3 my-auto tabular-nums"},Ie={class:"progress-bar"},Le=P({__name:"presenter",setup(f){const r=N();ue(),de(r),me();const{clicksContext:i,currentSlideNo:c,currentSlideRoute:d,hasNext:v,nextRoute:u,slides:b,getPrimaryClicks:S,total:j}=O(),{isDrawing:D}=ae();U({title:`Presenter - ${re}`}),N(!1);const{timer:I,isTimerAvctive:L,resetTimer:w,toggleTimer:$}=Ce(),R=y(()=>b.value.map(_=>X(_))),a=y(()=>i.value.current<i.value.total?[d.value,i.value.current+1]:v.value?[u.value,0]:null),x=y(()=>a.value&&R.value[a.value[0].no-1]);F(a,()=>{x.value&&a.value&&(x.value.current=a.value[1])},{immediate:!0});const z=V();return W(()=>{const _=r.value.querySelector("#slide-content"),e=G(H()),k=q();F(()=>{if(!k.value||D.value||!Z.value)return;const n=_.getBoundingClientRect(),C=(e.x-n.left)/n.width*100,h=(e.y-n.top)/n.height*100;if(!(C<0||C>100||h<0||h>100))return{x:C,y:h}},n=>{Y.cursor=n})}),(_,e)=>{var k;return o(),m(K,null,[s("div",Se,[s("div",{class:E(["grid-container",`layout${t(ee)}`])},[s("div",{ref_key:"main",ref:r,class:"relative grid-section main flex flex-col"},[l(M,{key:"main",class:"p-2 lg:p-4 flex-auto","is-main":"",onContextmenu:t(ve)},{default:g(()=>[l(pe,{"render-context":"presenter"})]),_:1},8,["onContextmenu"]),(o(),p(ye,{key:(k=t(d))==null?void 0:k.no,"clicks-context":t(S)(t(d)),class:"w-full pb2 px4 flex-none"},null,8,["clicks-context"])),e[4]||(e[4]=s("div",{class:"absolute left-0 top-0 bg-main border-b border-r border-main px2 py1 op50 text-sm"}," Current ",-1))],512),s("div",we,[a.value&&x.value?(o(),p(M,{key:"next"},{default:g(()=>[(o(),p(ce,{key:a.value[0].no,"clicks-context":x.value,route:a.value[0],"render-context":"previewNext"},null,8,["clicks-context","route"]))]),_:1})):(o(),m("div",$e,e[5]||(e[5]=[s("div",{class:"text-gray-500"}," End of the presentation ",-1)]))),e[6]||(e[6]=s("div",{class:"absolute left-0 top-0 bg-main border-b border-r border-main px2 py1 op50 text-sm"}," Next ",-1))]),z.value&&t(te)?(o(),m("div",ze,[l(t(z))])):(o(),m("div",Ne,[(o(),p(he,{key:`static-${t(c)}`,no:t(c),class:"w-full max-w-full h-full overflow-auto p-2 lg:p-4",style:T({fontSize:`${t(se)}em`}),"clicks-context":t(i)},null,8,["no","style","clicks-context"])),s("div",Fe,[l(B,{title:"Increase font size",onClick:t(oe)},{default:g(()=>e[7]||(e[7]=[s("div",{class:"i-carbon:zoom-in"},null,-1)])),_:1},8,["onClick"]),l(B,{title:"Decrease font size",onClick:t(ne)},{default:g(()=>e[8]||(e[8]=[s("div",{class:"i-carbon:zoom-out"},null,-1)])),_:1},8,["onClick"]),Q("v-if",!0)])])),s("div",Te,[l(fe,{persist:!0}),e[12]||(e[12]=s("div",{"flex-auto":""},null,-1)),s("div",Me,[s("div",Be,[e[11]||(e[11]=s("div",{class:"i-carbon:time group-hover:hidden text-xl"},null,-1)),s("div",Pe,[s("div",{class:"relative op-80 hover:op-100",onClick:e[2]||(e[2]=(...n)=>t($)&&t($)(...n))},[t(L)?(o(),m("div",Ee)):(o(),m("div",je))]),s("div",{class:"op-80 hover:op-100",onClick:e[3]||(e[3]=(...n)=>t(w)&&t(w)(...n))},e[10]||(e[10]=[s("div",{class:"i-carbon:renew"},null,-1)]))])]),s("div",De,J(t(I)),1)])]),(o(),p(be,{key:2}))],2),s("div",Ie,[s("div",{class:"progress h-3px bg-primary transition-all",style:T({width:`${(t(c)-1)/(t(j)-1)*100+1}%`})},null,4)])]),l(xe),l(_e),l(ke)],64)}}}),Oe=ie(Le,[["__scopeId","data-v-fd964655"]]);export{Oe as default};
