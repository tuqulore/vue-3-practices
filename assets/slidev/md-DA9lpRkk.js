import{d as x,L as w,O as T,o as B,c as V,F as R,aH as E,v as d,aI as v,aJ as G,l as c,ag as K,aK as L,k as m,e as t,ac as l,q as M,s as O,B as j}from"../modules/vue-gdZ2Vq1T.js";import{af as F,ai as P,aj as D,C as J}from"../index-Bp5De2th.js";import{u as z,f as q}from"./context-DpWy8LaO.js";import{I as H}from"./default-R5G8oopQ.js";import"../modules/shiki-BLYBuTQ3.js";const U=x({__name:"VClickGap",props:{size:{type:[String,Number],default:1}},setup(u){const o=u,{$clicksContext:p}=z(),y=F();let g=+o.size;return Number.isNaN(g)&&(console.warn(`[slidev] Invalid size for VClickGap: ${o.size}`),g=1),w(()=>{const f=p.currentOffset+g-1;p.register(y,{max:f,delta:g})}),T(()=>{p.unregister(y)}),(f,n)=>(B(),V(R))}}),I=["ul","ol"],W=x({props:{depth:{type:[Number,String],default:1},every:{type:[Number,String],default:1},at:{type:[Number,String],default:"+1"},hide:{type:Boolean,default:!1},fade:{type:Boolean,default:!1},handleSpecialElements:{type:Boolean,default:!0}},render(){var S,$;const u=+this.every,o=P(this.at),p=typeof o=="string";if(!o){console.warn("[slidev] Invalid at prop for v-clicks component:",o);return}const y=E("click"),g=(i,s)=>K(i,[[y,s,"",{hide:this.hide,fade:this.fade}]]),f=i=>i.flatMap(s=>v(s)&&typeof s.type=="symbol"&&Array.isArray(s.children)?f(s.children):[s]);let n=($=(S=this.$slots).default)==null?void 0:$.call(S);if(!n)return;n=f(D(n));const b=(i,s=1)=>f(i).map(r=>{if(!v(r))return r;if(I.includes(r.type)&&Array.isArray(r.children)){const h=a(r.children,s+1);return d(r,{},h)}return d(r)});let A=1,e=0;const a=(i,s=1)=>f(i).map(r=>{if(!v(r)||r.type===G)return r;const h=+o+Math.ceil(A++/u)-1;let N;s<+this.depth&&Array.isArray(r.children)?N=d(r,{},b(r.children,s)):N=d(r);const k=h-e;return e=h,g(N,p?k>=0?`+${k}`:`${k}`:h)}),C=()=>c(U,{size:+o+Math.ceil((A-1)/u)-1-e});if(this.handleSpecialElements){if(n.length===1&&I.includes(n[0].type)&&Array.isArray(n[0].children))return d(n[0],{},[...a(n[0].children),C()]);if(n.length===1&&n[0].type==="table"){const i=n[0];if(Array.isArray(i.children))return d(i,{},i.children.map(s=>v(s)?s.type==="tbody"&&Array.isArray(s.children)?d(s,{},[...a(s.children),C()]):d(s):s))}}return[...a(n),C()]}}),X=x({props:{at:{type:[Number,String],default:"+1"},hide:{type:Boolean,default:!1},fade:{type:Boolean,default:!1},wrapText:{type:Function,default:u=>d("span",u)}},render(){return d(W,{every:J,at:this.at,hide:this.hide,fade:this.fade,handleSpecialElements:!1},{default:()=>{var u,o;return(o=(u=this.$slots).default)==null?void 0:o.call(u).map(p=>p.type===L?this.wrapText(p):p)}})}}),le={__name:"slides.md__slidev_59",setup(u){const{$slidev:o,$nav:p,$clicksContext:y,$clicks:g,$page:f,$renderContext:n,$frontmatter:b}=z();return y.setup(),(A,e)=>{const a=X;return B(),V(H,M(O(j(q)(j(b),58))),{default:m(()=>[e[12]||(e[12]=t("h1",null,"コンポーザブルを使うときの注意",-1)),e[13]||(e[13]=t("p",null,[l("コンポーザブルの引数への値の渡しかたによっては"),t("strong",null,"リアクティビティが失われてしまう（！）")],-1)),e[14]||(e[14]=t("p",null,[l("このうちいくつが "),t("code",null,"props.hoge"),l(" のリアクティビティを保って useComposable() に値を渡せるでしょうか…？")],-1)),t("ol",null,[t("li",null,[c(a,null,{default:m(()=>e[0]||(e[0]=[l("NG: ")])),_:1}),e[1]||(e[1]=t("code",null,"useComposable(props.hoge)",-1))]),t("li",null,[c(a,null,{default:m(()=>e[2]||(e[2]=[l("OK: ")])),_:1}),e[3]||(e[3]=t("code",null,'const hoge = toRef(props, "hoge"); useComposable(hoge)',-1))]),t("li",null,[c(a,null,{default:m(()=>e[4]||(e[4]=[l("OK: ")])),_:1}),e[5]||(e[5]=t("code",null,"const { hoge } = toRefs(props); useComposable(hoge)",-1))]),t("li",null,[c(a,null,{default:m(()=>e[6]||(e[6]=[l("NG: ")])),_:1}),e[7]||(e[7]=t("code",null,"const hoge = ref(props.hoge); useComposable(hoge)",-1))]),t("li",null,[c(a,null,{default:m(()=>e[8]||(e[8]=[l("OK: ")])),_:1}),e[9]||(e[9]=t("code",null,"useComposable(() => props.hoge)",-1))])]),c(a,null,{default:m(()=>e[10]||(e[10]=[t("p",null,[l("props や reactive() の値は "),t("strong",null,[l("必ず Ref 型か"),t("a",{href:"https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Functions/get#%E8%A7%A3%E8%AA%AC",target:"_blank"},"ゲッター関数"),l("にしてコンポーザブルに渡す")]),l("こと！")],-1),t("p",null,[l("4. は hoge のリアクティブな値が渡せているけど props.hoge と値は同期されない"),t("br"),t("code",null,"ref(props.hoge)"),l(" で props.hoge とのリアクティビティが失われるため")],-1)])),_:1}),c(a,null,{default:m(()=>e[11]||(e[11]=[t("ul",null,[t("li",null,[l("コンポーザブルでは受け取った引数をどう参照すればいい？.valueつけないとだめ？→"),t("a",{href:"https://ja.vuejs.org/api/reactivity-utilities#tovalue",target:"_blank"},"toValue()"),l("を使おう")]),t("li",null,[l("興味がある人向け："),t("a",{href:"https://ja.vuejs.org/guide/reusability/composables.html#conventions-and-best-practices",target:"_blank"},"慣例とベストプラクティス"),l("を読もう！")]),t("li",null,[l("興味がある人向け：非同期処理はコンポーザブルでどう扱えばいい？→"),t("a",{href:"https://ja.vuejs.org/guide/reusability/composables#async-state-example",target:"_blank"},"非同期の状態の例"),l("をみよう！ "),t("ul",null,[t("li",null,[l("コンポーザブルは同期関数にする必要があるので、"),t("a",{href:"https://ja.javascript.info/promise-chaining",target:"_blank"},"Promise チェーン"),l("を使おう")])])])],-1)])),_:1})]),_:1},16)}}};export{le as default};
