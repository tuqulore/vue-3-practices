import{I as d}from"./default-BQLg3l6Q.js";import{_ as m,bm as l}from"../index-DbUh889g.js";import{p as u,u as _,f as x}from"./context-BfYGPgxv.js";import{o as P,c as S,k as g,q as $,s as b,e as t,a6 as e}from"../modules/vue-Dm92XYA6.js";import"../modules/shiki-CvIsS016.js";const v={__name:"72",setup(p,{expose:r}){r(),u(l);const{$slidev:s,$nav:o,$clicksContext:n,$clicks:a,$page:i,$renderContext:f,$frontmatter:h}=_(),c={$slidev:s,$nav:o,$clicksContext:n,$clicks:a,$page:i,$renderContext:f,$frontmatter:h,InjectedLayout:d,get frontmatter(){return l},get useSlideContext(){return _},get _provideFrontmatter(){return u},get _frontmatterToProps(){return x}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}},F=t("h1",null,"Vue + Vue Router と Nuxt 3 の比較（データ取得）",-1),k=t("p",null,"便利だが素朴にFetch APIを使う場合と挙動が異なるので注意が必要",-1),I=t("p",null,[e("Nuxt 3におけるHTTP APIクライアントは、Fetch APIをラップ：Fetch API使用時便利な処理があらかじめ実装された "),t("a",{href:"https://github.com/unjs/ofetch",target:"_blank"},"ofetch"),e(" が使われている。以下重要な点や便利な点を挙げる")],-1),T=t("ul",null,[t("li",null,[e("useFetch は "),t("a",{href:"https://nuxt.com/docs/api/utils/dollarfetch",target:"_blank"},"$fetch"),e(" を使用しており、$fetch は ofetch と等価")]),t("li",null,"レスポンスボディが JSON 形式なら JS オブジェクトにしてくれる"),t("li",null,"2xx HTTP ステータスでないときエラーを投げてくれる")],-1),N=t("p",null,[e("useFetchはサーバーサイドレンダリング（SSR）：データをあらかじめサーバーで取得してブラウザーにレスポンスとして返すとき、取得URLをパスのみ（例："),t("code",null,'"/api/count"'),e("）にすると Nuxt が管理するエンドポイント：末端、この場合URLかどうかチェックする。つまり取得先がpagesディレクトリやserverディレクトリで作成したページやAPIエンドポイントである必要がある。")],-1),R=t("p",null,[e("useFetchをSSRで実行しない（serverオプションを"),t("code",null,"false"),e("にする）こともできる。詳細は公式ドキュメントを参照のこと "),t("a",{href:"https://nuxt.com/docs/api/composables/use-fetch",target:"_blank"},"https://nuxt.com/docs/api/composables/use-fetch")],-1),A=t("p",null,"fetchを使うこともできるが、Nuxt 3を使うならuseFetchや$fetchが便利。ただし、SSRの挙動が複雑で意図しない動作時エラーが生じることもあるので注意しよう",-1);function C(p,r,s,o,n,a){return P(),S(o.InjectedLayout,$(b(o._frontmatterToProps(o.frontmatter,71))),{default:g(()=>[F,k,I,T,N,R,A]),_:1},16)}const H=m(v,[["render",C],["__file","/@slidev/slides/72.md"]]);export{H as default};
