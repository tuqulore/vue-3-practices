import{d as B,z as h,f as v,n as m,g as u,T as H,F as $,t as x,ah as T,aj as N,ai as z,k as E,o as f,r as A,K as I,L as F,E as P,p as K}from"../modules/vue-CfZMIZOj.js";import{r as R,v as V,C as D,_ as j}from"../index-o_--okiU.js";const q=["title"],U={class:"flex gap-0.2 items-center min-w-16 font-mono mr1"},X={"text-primary":""},G={op50:"","text-sm":""},J={key:1,op50:"","flex-auto":"",pl1:""},O={relative:"","flex-auto":"",h5:"","font-mono":"",flex:"~"},Q=["min","max"],W=B({__name:"ClicksSlider",props:{clicksContext:{},readonly:{type:Boolean},active:{type:Boolean,default:!0}},setup(w){const d=w,t=h(()=>d.clicksContext.total),k=h(()=>R(0,d.clicksContext.clicksStart,t.value)),p=h(()=>t.value-k.value+1),n=h({get(){return d.clicksContext.current>t.value?-1:d.clicksContext.current},set(a){d.clicksContext.current=a}}),y=h(()=>V(k.value,t.value+1));function C(){d.readonly||(n.value<0||n.value>t.value)&&(n.value=0)}return(a,c)=>(f(),v("div",{class:m(["flex gap-1 items-center select-none",p.value&&d.clicksContext.isMounted?"":"op50"]),title:`Clicks in this slide: ${p.value}`},[u("div",U,[c[4]||(c[4]=u("div",{class:"i-carbon:cursor-1 text-sm op50"},null,-1)),n.value>=0&&n.value!==H(D)&&a.active?(f(),v($,{key:0},[c[2]||(c[2]=u("div",{"flex-auto":""},null,-1)),u("span",X,x(n.value),1),c[3]||(c[3]=u("span",{op25:"","text-sm":""},"/",-1)),u("span",G,x(t.value),1)],64)):(f(),v("div",J,x(t.value),1))]),u("div",O,[(f(!0),v($,null,N(y.value,s=>(f(),v("div",{key:s,border:"y main","of-hidden":"",relative:"",class:m([s===0?"rounded-l border-l":"",s===t.value?"rounded-r border-r":""]),style:E({width:p.value>0?`${1/p.value*100}%`:"100%"})},[u("div",{absolute:"","inset-0":"",class:m(s<=n.value&&a.active?"bg-primary op15":"")},null,2),u("div",{class:m([+s==+n.value&&a.active?"text-primary font-bold op100 border-primary":"op30 border-main",s===0?"rounded-l":"",s===t.value?"rounded-r":"border-r-2"]),"w-full":"","h-full":"","text-xs":"",flex:"","items-center":"","justify-center":"","z-1":""},x(s),3)],6))),128)),T(u("input",{"onUpdate:modelValue":c[0]||(c[0]=s=>n.value=s),class:m(["range",a.readonly?"pointer-events-none":""]),type:"range",min:k.value,max:t.value,step:1,absolute:"","inset-0":"","z-label":"",op0:"",style:E({"--thumb-width":`${1/(p.value+1)*100}%`}),onMousedown:C,onFocus:c[1]||(c[1]=s=>s.currentTarget?.blur())},null,46,Q),[[z,n.value]])])],10,q))}}),se=j(W,[["__scopeId","data-v-9d316a39"]]),Y=["innerHTML"],Z=["textContent"],ee=["textContent"],L="slidev-note-fade",g="slidev-note-click-mark",le=B({__name:"NoteDisplay",props:{class:{},noteHtml:{},note:{},highlight:{type:Boolean,default:!0},placeholder:{},clicksContext:{},autoScroll:{type:Boolean}},emits:["markerDblclick","markerClick"],setup(w,{emit:d}){const t=w,k=d,p=h(()=>t.clicksContext!=null&&t.noteHtml?.includes(g)),n=A(null);function y(){if(!n.value||!p.value)return;const a=Array.from(n.value.querySelectorAll(`.${g}`)),c=new Map,s=new Map;let M=0;for(const r of a){const l=Number(r.dataset.clicks);c.set(r,l);let o=r,e=r.parentElement;for(;e&&o!==n.value;)s.has(e)||s.set(e,[[null,M]]),s.get(e).push([o,l]),o=e,e=e.parentElement;M=l}const S=new Map;for(const[r,l]of s){let o=!1,e=0;for(const i of Array.from(r.childNodes)){let _=!1;for(;i===l[e+1]?.[0];)_=!0,e++;if(_)continue;let b=i;if(i.nodeType===3){if(!i.textContent?.trim())continue;b=document.createElement("span"),b.textContent=i.textContent,r.insertBefore(b,i),i.remove()}o||=e===0,S.set(b,l[e][1])}o||(l[0][1]=-1)}return r=>{const l=t.highlight;for(const[o,e]of s)o.classList.toggle(L,l&&!e.some(([i,_])=>_===r));for(const[o,e]of S)o.classList.toggle(L,l&&e!==r);for(const[o,e]of c)o.classList.remove(L),o.classList.toggle(`${g}-past`,l&&e<r),o.classList.toggle(`${g}-active`,l&&e===r),o.classList.toggle(`${g}-next`,l&&e===r+1),o.classList.toggle(`${g}-future`,l&&e>r+1),o.ondblclick=i=>{l&&(k("markerDblclick",i,e),!i.defaultPrevented&&(t.clicksContext.current=e,i.stopPropagation(),i.stopImmediatePropagation()))},o.onclick=i=>{l&&k("markerClick",i,e)},l&&t.autoScroll&&e===r&&o.scrollIntoView({block:"center",behavior:"smooth"})}}const C=A();return I(()=>[t.noteHtml,t.highlight],()=>{K(()=>{C.value=y()})},{immediate:!0}),F(()=>{y()}),P(()=>{const a=t.clicksContext?.current??D;C.value?.(a)}),(a,c)=>a.noteHtml?(f(),v("div",{key:0,ref_key:"noteDisplay",ref:n,class:m(["prose dark:prose-invert overflow-auto outline-none slidev-note",[t.class,p.value?"slidev-note-with-clicks":""]]),innerHTML:a.noteHtml},null,10,Y)):a.note?(f(),v("div",{key:1,class:m(["prose dark:prose-invert overflow-auto outline-none slidev-note",t.class])},[u("p",{textContent:x(a.note)},null,8,Z)],2)):(f(),v("div",{key:2,class:m(["prose dark:prose-invert overflow-auto outline-none opacity-50 italic select-none slidev-note",t.class])},[u("p",{textContent:x(t.placeholder||"No notes.")},null,8,ee)],2))}});export{se as C,le as _};
