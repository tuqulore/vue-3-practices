import{d as S,aa as T,ab as V,t as k,ac as j,D as C,C as z,a0 as K,n as L,o as f,c as B,i as p,h as g,ad as N,ae as H,b as v,j as O,y as _,e as c,l as A,F as w,x,g as F,a8 as R,p as U,a as X}from"../modules/vue-DIsqvsVl.js";import{c as q}from"./DrawingPreview-CJky664Y.js";import{N as P}from"./NoteDisplay-fujSXH1D.js";import{_ as M,o as G,r as J,C as Q}from"../index-Bd05aFLp.js";import{n as W}from"../modules/unplugin-icons-CQ2ctJxD.js";const Y=S({__name:"NoteEditable",props:{no:{type:Number,required:!0},class:{default:""},editing:{default:!1},style:{default:()=>({})},placeholder:{default:"No notes for this slide"},clicksContext:{type:Object},autoHeight:{default:!1}},emits:["update:editing","markerDblclick","markerClick"],setup(i,{expose:o,emit:n}){o();const e=i,d=n,a=T(e,"editing",d,{passive:!0}),{info:l,update:t}=q(V(e,"no")),r=k("");let u;const{ignoreUpdates:h}=j(r,s=>{if(!a.value)return;const E=e.no;clearTimeout(u),u=setTimeout(()=>{t({note:s},E)},500)});C(()=>{var s;return(s=l.value)==null?void 0:s.note},(s="")=>{a.value||(clearTimeout(u),h(()=>{r.value=s}))},{immediate:!0,flush:"sync"});const m=k(),I=k();z(()=>{var s;a.value&&((s=m.value)==null||s.focus())}),K(m,()=>{a.value=!1});function y(){!e.autoHeight||!m.value||!a.value||m.value.scrollHeight>m.value.clientHeight&&(m.value.style.height=`${m.value.scrollHeight}px`)}C([r,a],()=>{L(()=>{y()})},{flush:"post",immediate:!0});const b={props:e,emit:d,editing:a,info:l,update:t,note:r,get timer(){return u},set timer(s){u=s},ignoreUpdates:h,inputEl:m,inputHeight:I,calculateEditorHeight:y,NoteDisplay:P};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}}),Z=["placeholder"];function $(i,o,n,e,d,a){var l;return e.editing?N((f(),v("textarea",{key:1,ref:"inputEl","onUpdate:modelValue":o[2]||(o[2]=t=>e.note=t),class:p(["prose resize-none overflow-auto outline-none bg-transparent block border-primary border-2",e.props.class]),style:g([{"line-height":"1.75"},[e.props.style,e.inputHeight!=null?{height:`${e.inputHeight}px`}:{}]]),placeholder:n.placeholder,onKeydown:o[3]||(o[3]=O(t=>e.editing=!1,["esc"]))},null,46,Z)),[[H,e.note]]):(f(),B(e.NoteDisplay,{key:0,class:p(["border-transparent border-2",[e.props.class,e.note?"":"opacity-25 italic select-none"]]),style:g(e.props.style),note:e.note||n.placeholder,"note-html":(l=e.info)==null?void 0:l.noteHTML,"clicks-context":n.clicksContext,"auto-scroll":!n.autoHeight,onMarkerClick:o[0]||(o[0]=(t,r)=>e.emit("markerClick",t,r)),onMarkerDblclick:o[1]||(o[1]=(t,r)=>e.emit("markerDblclick",t,r))},null,8,["class","style","note","note-html","clicks-context","auto-scroll"]))}const pe=M(Y,[["render",$],["__file","/home/runner/work/vue-3-practices/vue-3-practices/node_modules/@slidev/client/internals/NoteEditable.vue"]]),ee=S({__name:"ClicksSlider",props:{clicksContext:{type:null,required:!0}},setup(i,{expose:o}){o();const n=i,e=_(()=>n.clicksContext.total),d=_(()=>G(0,n.clicksContext.clicksStart,e.value)),a=_(()=>e.value-d.value+1),l=_({get(){return n.clicksContext.current>e.value?-1:n.clicksContext.current},set(h){n.clicksContext.current=h}}),t=_(()=>J(d.value,e.value+1));function r(){(l.value<0||l.value>e.value)&&(l.value=0)}const u={props:n,total:e,start:d,length:a,current:l,clicksRange:t,onMousedown:r,get CLICKS_MAX(){return Q}};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}}),D=i=>(U("data-v-46333647"),i=i(),X(),i),te=["title"],oe={class:"flex gap-0.5 items-center min-w-16 font-mono mr1"},ne=D(()=>c("div",{"flex-auto":""},null,-1)),re={"text-primary":""},le=D(()=>c("span",{op25:""},"/",-1)),ae={op50:""},se=["min","max"];function ie(i,o,n,e,d,a){const l=W;return f(),v("div",{class:p(["flex gap-1 items-center select-none",e.length?"":"op50"]),title:`Clicks in this slide: ${e.length}`},[c("div",oe,[A(l,{"text-sm":"",op50:""}),ne,e.current>=0&&e.current!==e.CLICKS_MAX?(f(),v(w,{key:0},[c("span",re,x(e.current),1),le],64)):F("v-if",!0),c("span",ae,x(e.total),1)]),c("div",{relative:"","flex-auto":"",h5:"","font-mono":"",flex:"~",onDblclick:o[2]||(o[2]=t=>e.current=n.clicksContext.total)},[(f(!0),v(w,null,R(e.clicksRange,t=>(f(),v("div",{key:t,border:"y main","of-hidden":"",relative:"",class:p([t===0?"rounded-l border-l":"",t===e.total?"rounded-r border-r":""]),style:g({width:e.length>0?`${1/e.length*100}%`:"100%"})},[c("div",{absolute:"","inset-0":"",class:p(t<=e.current?"bg-primary op15":"")},null,2),c("div",{class:p([+t==+e.current?"text-primary font-bold op100 border-primary":"op30 border-main",t===0?"rounded-l":"",t===e.total?"rounded-r":"border-r-2"]),"w-full":"","h-full":"","text-xs":"",flex:"","items-center":"","justify-center":"","z-1":""},x(t),3)],6))),128)),N(c("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>e.current=t),class:"range",absolute:"","inset-0":"",type:"range",min:e.start,max:e.total,step:1,"z-10":"",op0:"",style:g({"--thumb-width":`${1/(e.length+1)*100}%`}),onMousedown:e.onMousedown,onFocus:o[1]||(o[1]=t=>{var r;return(r=t.currentTarget)==null?void 0:r.blur()})},null,44,se),[[H,e.current]])],32)],10,te)}const _e=M(ee,[["render",ie],["__scopeId","data-v-46333647"],["__file","/home/runner/work/vue-3-practices/vue-3-practices/node_modules/@slidev/client/internals/ClicksSlider.vue"]]);export{_e as C,pe as N};
