import{d as C,L as _,O as w,b as $,o as z,F as M,aM as O,h as d,e as m,aN as y,aO as R,ah as E,aP as G,w as f,g as t,ad as l,v as L,x as P,T as j}from"../modules/vue-DtSmzeM3.js";import{al as F,ao as K,ap as D,C as J}from"../index-DjlZ68DI.js";import{u as B,f as U}from"./context-DnQf6Pd1.js";import{I as W}from"./default-Dzmv9YgT.js";import"../modules/shiki-3_FXpx2p.js";const X=C({__name:"VClickGap",props:{size:{type:[String,Number],default:1}},setup(p){const o=p,{$clicksContext:u}=B(),r=F();let e=+o.size;return Number.isNaN(e)&&(console.warn(`[slidev] Invalid size for VClickGap: ${o.size}`),e=1),_(()=>{const a=u.currentOffset+e-1;u.register(r,{max:a,delta:e})}),w(()=>{u.unregister(r)}),(a,c)=>(z(),$(M))}}),V=["ul","ol"],q=C({props:{depth:{type:[Number,String],default:1},every:{type:[Number,String],default:1},at:{type:[Number,String],default:"+1"},hide:{type:Boolean,default:!1},fade:{type:Boolean,default:!1},handleSpecialElements:{type:Boolean,default:!0}},render(){var k,S;const p=+this.every,o=K(this.at),u=typeof o=="string";let r=(S=(k=this.$slots).default)==null?void 0:S.call(k);if(o==null||!r)return r;const e=O("click"),a=(i,s)=>E(i,[[e,s,"",{hide:this.hide,fade:this.fade}]]),c=i=>i.flatMap(s=>y(s)&&typeof s.type=="symbol"&&Array.isArray(s.children)?c(s.children):[s]);r=c(D(r));const I=(i,s=1)=>c(i).map(n=>{if(!y(n))return n;if(V.includes(n.type)&&Array.isArray(n.children)){const g=h(n.children,s+1);return d(n,{},g)}return d(n)});let x=1,b=0;const h=(i,s=1)=>c(i).map(n=>{if(!y(n)||n.type===R)return n;const g=+o+Math.ceil(x++/p)-1;let N;s<+this.depth&&Array.isArray(n.children)?N=d(n,{},I(n.children,s)):N=d(n);const A=g-b;return b=g,a(N,u?A>=0?`+${A}`:`${A}`:g)}),v=()=>m(X,{size:+o+Math.ceil((x-1)/p)-1-b});if(this.handleSpecialElements){if(r.length===1&&V.includes(r[0].type)&&Array.isArray(r[0].children))return d(r[0],{},[...h(r[0].children),v()]);if(r.length===1&&r[0].type==="table"){const i=r[0];if(Array.isArray(i.children))return d(i,{},i.children.map(s=>y(s)?s.type==="tbody"&&Array.isArray(s.children)?d(s,{},[...h(s.children),v()]):d(s):s))}}return[...h(r),v()]}}),H=C({props:{at:{type:[Number,String],default:"+1"},hide:{type:Boolean,default:!1},fade:{type:Boolean,default:!1},wrapText:{type:Function,default:p=>d("span",p)}},render(){return d(q,{every:J,at:this.at,hide:this.hide,fade:this.fade,handleSpecialElements:!1},{default:()=>{var p,o;return(o=(p=this.$slots).default)==null?void 0:o.call(p).map(u=>u.type===G?this.wrapText(u):u)}})}}),le={__name:"slides.md__slidev_59",setup(p){const{$clicksContext:o,$frontmatter:u}=B();return o.setup(),(r,e)=>{const a=H;return z(),$(W,L(P(j(U)(j(u),58))),{default:f(()=>[e[12]||(e[12]=t("h1",null,"コンポーザブルを使うときの注意",-1)),e[13]||(e[13]=t("p",null,[l("コンポーザブルの引数への値の渡しかたによっては"),t("strong",null,"リアクティビティが失われてしまう（！）")],-1)),e[14]||(e[14]=t("p",null,[l("このうちいくつが "),t("code",null,"props.hoge"),l(" のリアクティビティを保って useComposable() に値を渡せるでしょうか…？")],-1)),t("ol",null,[t("li",null,[m(a,null,{default:f(()=>e[0]||(e[0]=[l("NG: ")])),_:1}),e[1]||(e[1]=t("code",null,"useComposable(props.hoge)",-1))]),t("li",null,[m(a,null,{default:f(()=>e[2]||(e[2]=[l("OK: ")])),_:1}),e[3]||(e[3]=t("code",null,'const hoge = toRef(props, "hoge"); useComposable(hoge)',-1))]),t("li",null,[m(a,null,{default:f(()=>e[4]||(e[4]=[l("OK: ")])),_:1}),e[5]||(e[5]=t("code",null,"const { hoge } = toRefs(props); useComposable(hoge)",-1))]),t("li",null,[m(a,null,{default:f(()=>e[6]||(e[6]=[l("NG: ")])),_:1}),e[7]||(e[7]=t("code",null,"const hoge = ref(props.hoge); useComposable(hoge)",-1))]),t("li",null,[m(a,null,{default:f(()=>e[8]||(e[8]=[l("OK: ")])),_:1}),e[9]||(e[9]=t("code",null,"useComposable(() => props.hoge)",-1))])]),m(a,null,{default:f(()=>e[10]||(e[10]=[t("p",null,[l("props や reactive() の値は "),t("strong",null,[l("必ず Ref 型か"),t("a",{href:"https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Functions/get#%E8%A7%A3%E8%AA%AC",target:"_blank"},"ゲッター関数"),l("にしてコンポーザブルに渡す")]),l("こと！")],-1),t("p",null,[l("4. は hoge のリアクティブな値が渡せているけど props.hoge と値は同期されない"),t("br"),t("code",null,"ref(props.hoge)"),l(" で props.hoge とのリアクティビティが失われるため")],-1)])),_:1}),m(a,null,{default:f(()=>e[11]||(e[11]=[t("ul",null,[t("li",null,[l("コンポーザブルでは受け取った引数をどう参照すればいい？.valueつけないとだめ？→"),t("a",{href:"https://ja.vuejs.org/api/reactivity-utilities#tovalue",target:"_blank"},"toValue()"),l("を使おう")]),t("li",null,[l("興味がある人向け："),t("a",{href:"https://ja.vuejs.org/guide/reusability/composables.html#conventions-and-best-practices",target:"_blank"},"慣例とベストプラクティス"),l("を読もう！")]),t("li",null,[l("興味がある人向け：非同期処理はコンポーザブルでどう扱えばいい？→"),t("a",{href:"https://ja.vuejs.org/guide/reusability/composables#async-state-example",target:"_blank"},"非同期の状態の例"),l("をみよう！ "),t("ul",null,[t("li",null,[l("コンポーザブルは同期関数にする必要があるので、"),t("a",{href:"https://ja.javascript.info/promise-chaining",target:"_blank"},"Promise チェーン"),l("を使おう")])])])],-1)])),_:1})]),_:1},16)}}};export{le as default};
